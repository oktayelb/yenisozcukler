{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeni Sözcükler</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body data-user-auth="{{ request.user.is_authenticated|yesno:'true,false' }}" 
      data-username="{{ request.user.username|default:'' }}">

    <div class="notification-container" id="notificationContainer"></div>
    <div id="modalBackdrop" class="modal-backdrop" onclick="closeCommentView()"></div> 

    <div class="header-controls">
        <button class="header-btn" id="darkModeToggle">Karanlık Mod</button>
    </div>

<div class="header-controls-right">
    {% if request.user.is_authenticated %}
        <div class="header-user-info">
            <span class="header-user-welcome">Merhaba, <strong>{{ request.user.username }}</strong></span>
            <button class="header-btn logout-btn" onclick="handleLogout()" title="Çıkış Yap">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
            </button>
        </div>
    {% else %}
        <button class="header-btn" onclick="openAuthModal()">Giriş Yap</button>
    {% endif %}
    <button class="header-btn" onclick="showAboutInfo()">Bu site nedir?</button>
</div>
    
    <header>
        <div class="logo-wrapper">
            <div class="logo-card theme-red pos-behind" id="cardRed" onclick="animateLogo(this)">
                <h1 id="mainTitle">Yeni Sözcükler</h1>
                <span class="subtitle" id="subtitleText">"Yeni küfürlerini de paylaş"</span>
            </div>

            <div class="logo-card theme-default pos-center" id="cardDefault" onclick="animateLogo(this)">
                <h1 id="mainTitle">Yeni Sözcükler</h1>
                <span class="subtitle" id="subtitleText">"Yeni sözcüklerini paylaş"</span>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="form-card">
            <div class="form-title">Katkıda Bulun</div>

            <form class="form-fields" onsubmit="handleWordSubmit(event)">
                <div class="form-group">
                    <label>Sözcük</label>
                    <input type="text" id="inputWord" maxlength="50"
                        onkeypress="return allowOnlyLetters(event, true)" 
                        oninput="this.value = this.value.replace(/^\s+/g, '')">
                </div>

                <div class="form-group def-wrapper">
                    <label>Tanım</label>
                    <textarea id="inputDef" rows="2" maxlength="300" oninput="updateCount(this)" placeholder="Tanımı buraya yazın..." onkeypress="return allowOnlyLetters(event, true)"></textarea>
                    <div class="char-limit" id="charCount">0 / 300</div>
                </div>

                <div class="form-group">
                    <label>Ekleyenin Takma Adı</label>
                    <input type="text" id="inputNick" maxlength="20" 
                           placeholder="{% if request.user.is_authenticated %}{{ request.user.username }}{% else %}Anonim{% endif %}" 
                           value="{% if request.user.is_authenticated %}{{ request.user.username }}{% endif %}"
                           {% if request.user.is_authenticated %}readonly{% endif %}
                           onkeypress="return allowOnlyLetters(event, false)">
                </div>
                
                <button type="submit">Sözlüğe Ekle</button>
            </form>
        </div>

        <div class="feed-container" id="feedList">
            <div class="spinner"></div>
        </div>

        <div class="load-more-container" id="loadMoreContainer" style="display:none;">
            <button class="load-more-btn" onclick="loadMoreWords()">Daha Fazla Göster</button>
        </div>
    </div>

    <div id="aboutModal" class="about-overlay" onclick="closeAboutInfo(event)">
        <div class="about-box">
            <div class="drawer-header" style="border:none; padding:0; margin-bottom:10px;">
                <div style="flex-grow:1;"></div>
                <button class="close-btn" onclick="closeAboutInfo(event, true)">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            
            <h2 class="about-heading">Bu Site Nedir?</h2>
                <p>
                    Bu site, kullanıcıların türettikleri yepyeni sözcükleri paylaşarak Türkçe'nin gelişmesine ve ilerlemesine katkıda
                    bulunabilecekleri, Türk dilinin ifade yelpazesini geliştirebilecekleri bir platformdur.
                </p>           
            <div class="about-text">
                <div class="about-section-title">Görevimiz</div>
                <p>
                    Amacımız, dilimizin zenginliklerini korumak ve modern ya da eski alıntı sözcükler yerine
                    yeni türetilen Türkçe sözcükleri modern bir platformda toplamaktır.
                </p>

                <div class="about-section-title">Nedenimiz</div>
                <p>
                    Yüzyıllar öncesinde yaşanan alıntı sözcük modası, günümüzde de yaşanıyor, ancak yaşanırken kimse farkında olamıyor.
                    Bu nedenle bu siteyi kurarak gelecek nesillere, yaşayan ve sürekli gelişen bir Türkçe sözlük mirası bırakmayı hedefliyoruz.
                </p>    
                <p>
                    Aynı zamanda sözcük türetme bilincini Türkçe ile kısıtlı bırakmayıp, kullanıcıları türettikleri yabancı sözcükleri de paylaşmaları için teşvik ediyoruz. 
                </p>

                <div class="about-section-title">İletişim</div>
                <p>
                    e269354@metu.edu.tr email adresine şikayet ve tavsiyelerinizi iletebilirsiniz.
                </p>
            </div>
        </div>
    </div>

    <div id="authModal" class="auth-overlay" onclick="closeAuthModal(event)">
        <div class="auth-box">
            <button class="close-btn auth-close" onclick="closeAuthModal(event, true)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>

            <div class="auth-header">
                <h2 id="authTitle">Giriş Yap / Kayıt Ol</h2>
                <p id="authSubtitle">Kullanıcı adın varsa giriş yapar, yoksa senin için oluştururuz.</p>
            </div>

            <div class="auth-form" id="authForm">
                <div class="form-group">
                    <label>Kullanıcı Adı</label>
                    <input type="text" id="authUsername" placeholder="Kullanıcı Adı" autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label>Şifre</label>
                    <input type="password" id="authPassword" placeholder="••••••" autocomplete="current-password">
                </div>
                
                <p id="authErrorMsg" style="color: var(--error-color); font-size: 0.9rem; margin-bottom: 10px; display: none;"></p>

                <button class="auth-submit-btn" type="button" onclick="handleAuthSubmit()">Devam Et</button>
            </div>
        </div>
    </div>

    <script src="{% static 'js/app.js' %}"></script>
</body>
</html>